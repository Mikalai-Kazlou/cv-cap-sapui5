sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/core/util/File","sap/m/MessageToast","../model/formatter"],function(e,t,o,n,s){"use strict";return e.extend("com.exercise.cvsapui5.controller.Main",{formatter:s,onInit:function(){const e=new t;this.setModel(e,"strings");this.oResourceBundle=this.getResourceBundle()},onWorkExperienceListUpdateFinished:function(e){const t=e.getSource().getItems();const o=[];t.forEach(e=>{const t=e.getBindingContext("mockdata").getObject();o.push({sTechnologies:this._convertListToSortedString(t.technologies),sProjectRoles:this._convertListToSortedString(t.projectRoles)});e.bindElement({path:`/${o.length-1}`,model:"strings"})});this.getModel("strings").setData(o)},onDownloadPress:function(){const e=this.getModel("constants");const t=e.getProperty("/cvFileUrl");const s=e.getProperty("/cvFileDisplayName");const r="application/pdf";$.ajax({url:t,method:"GET",xhrFields:{responseType:"arraybuffer"},success:function(e){const t=new Blob([e],{type:r});o.save(t,s,"pdf",r)},error:function(e){n.show(this.oResourceBundle.getText("downloadError"));console.error("Download error:",e)}})},onImageIconPress:function(e){const t=e.getSource().getAlt();sap.m.URLHelper.redirect(t,true)},_convertListToSortedString:function(e){e.sort((e,t)=>e.order-t.order);const t=e.map(e=>e.child.title);return t.join(", ")}})});
//# sourceMappingURL=Main.controller.js.map